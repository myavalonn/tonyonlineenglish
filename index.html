<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>èª²ç¨‹é¸å–® - Tony Online English</title>
<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+TC:wght@400;700;900&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    /* === åŸæœ‰ Header Banner Styles === */
    .tony-banner {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 90;
        width: 100%;
        height: 75px;
        background-color: #060b1c;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 15px;
        box-sizing: border-box;
        border-bottom: 1px solid #1a2a4a;
    }
    .logo-box { height: 50px; flex-shrink: 0; }
    .logo-box img { height: 100%; width: auto; display: block; }
    .nav-links { display: flex; align-items: center; gap: 8px; }
    .pill-btn {
        color: white; border: 1px solid rgba(255,255,255,0.6);
        padding: 6px 12px; border-radius: 50px;
        text-decoration: none; font-size: 13px;
        display: flex; align-items: center; gap: 6px;
        transition: 0.3s; white-space: nowrap;
    }
    .pill-btn:hover { background-color: rgba(255,255,255,0.1); }
    .social-icon { height: 18px; width: auto; display: block; }
    .hamburger-icon { font-size: 28px;  /* è®“å®ƒå¤§ä¸€é»ï¼Œæ¯”è¼ƒå¥½æŒ‰ */ color: #FFFFFF;  /* è¨­å®šç‚ºç™½è‰² */ margin-right: 15px; cursor: pointer; display: flex; align-items: center; /* é€™è£¡çµ•å°ä¸èƒ½å¯« filter: invert(1) */ }
    @media (max-width: 500px) {
        .pill-btn span { display: none; }
        .pill-btn { padding: 8px; border-radius: 50%; width: 35px; height: 35px; justify-content: center; }
        .tony-banner { height: 65px; padding: 0 10px; }
        .logo-box { height: 40px; }
    }

    /* === åŸæœ‰ä¸»é é¢ç‰ˆå‹ (Desktop & Mobile) === */
    html, body { min-height: calc(100vh + 200px); }
    html { scroll-behavior: smooth; }
    body {
        display: flex; flex-direction: column; justify-content: center;
        margin: 0; font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        overflow-x: hidden; background-color: #1a1a1d;
    }
    .desktop-view-wrapper {
        background-color: #1a1a1d; display: flex; justify-content: center; align-items: center;
        flex-wrap: nowrap; gap: 40px; padding: 40px; width: 100%; box-sizing: border-box;
    }
    .phone { box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); position: relative; background-color: #000; overflow: hidden; flex-shrink: 0; transition: margin 0.3s ease, transform 0.3s ease; }
    .phone-max { width: 430px; height: 888px; border: 12px solid #2c2c2c; border-radius: 54px; }
    .phone-standard { width: 393px; height: 852px; border: 11px solid #2c2c2c; border-radius: 52px; }
    .phone-max.shortened { height: 788px; }
    .phone-standard.shortened { height: 752px; }
    .phone-screen { background-size: cover; background-position: center; width: 100%; height: 100%; display: flex; flex-direction: column; color: white; text-align: center; box-sizing: border-box; position: relative; }
    .status-bar-container { position: absolute; top: 18px; left: 20px; right: 20px; height: 40px; z-index: 10; }
    .status-bar { height: 100%; display: flex; justify-content: space-between; align-items: center; color: white; font-size: 15px; font-weight: 600; padding: 0 15px; }
    .time { position: absolute; left: 20px; }
    .status-icons { position: absolute; right: 20px; }
    .dynamic-island { position: absolute; top: 24px; left: 50%; transform: translateX(-50%); width: 120px; height: 35px; background-color: #000; border-radius: 20px; z-index: 9; }
    
    #screen-certs { background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://ik.imagekit.io/lql1uveoc/%E8%AA%B2%E7%A8%8B%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9/wallace-henry-WHfpUNsHTdQ-unsplash.jpg?updatedAt=1757228192757'); justify-content: flex-start; padding: 110px 20px 20px 20px; align-items: center; }
    #screen-certs .certs-title-container { background: rgba(0, 0, 0, 0.25); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.18); border-radius: 999px; padding: 10px 30px; margin-bottom: 25px; box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2); }
    #screen-certs .certs-title { font-family: 'Orbitron', sans-serif; font-size: 2.8em; font-weight: 700; color: #e0e0e0; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); }
    #screen-certs .button-group { display: flex; flex-direction: column; gap: 18px; width: 100%; }
    #screen-certs .slide-button { display: flex; justify-content: center; align-items: center; font-weight: bold; color: white; text-decoration: none; padding: 15px; font-size: 1.3rem; font-family: 'Orbitron', sans-serif; transition: transform 0.2s ease; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 25px rgba(0, 0, 0, 0.25); border-radius: 20px; }
    #screen-certs .slide-button:hover { transform: scale(1.04); }
    #screen-certs .green { background-color: rgba(26, 188, 156, 0.4); }
    #screen-certs .red { background-color: rgba(231, 76, 60, 0.4); }
    #screen-certs .purple { background-color: rgba(155, 89, 182, 0.4); }
    #screen-certs .custom-orange { background-color: rgba(243, 156, 18, 0.4); }
    #screen-certs .icon-img { height: 1.8em; width: 1.8em; margin-right: 15px; object-fit: contain; }
    #screen-certs .subtitle { font-family: 'Orbitron', sans-serif; margin-top: 18px; font-size: 1.4em; color: white; font-weight: 700; }
    #screen-certs .certs-footer { margin-top: auto; padding-bottom: 10px; }
    
    #screen-academic { background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://ik.imagekit.io/lql1uveoc/%E8%AA%B2%E7%A8%8B%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9/benjamin-voros-phIFdC6lA4E-unsplash.jpg?updatedAt=1759344584590&tr=w-800,f-auto,q-70'); padding-top: 100px; justify-content: flex-start; align-items: center;}
    #screen-academic .menu { width:100%; padding: 0 20px; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; flex-grow:1; }
    #screen-academic .glass-title { background:rgba(0,0,0,0.25); backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px); border:1px solid rgba(255,255,255,0.18); border-radius:25px; padding:15px 35px; margin-bottom:25px; box-shadow:0 4px 30px rgba(0,0,0,0.2); }
    #screen-academic .glass-title-text { font-size:3.5em; font-weight:bold; color:#fff; text-shadow:0 2px 4px rgba(0,0,0,0.5); }
    #screen-academic .button-group { display: flex; flex-direction: column; gap: 15px; width: 100%; }
    #screen-academic .slide-button { display: flex; justify-content: center; align-items: center; font-weight: bold; color: white; text-decoration: none; padding: 15px; font-size: 1.3rem; font-family: 'Orbitron', sans-serif; transition: transform 0.2s ease, background-color 0.2s ease; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 25px rgba(0, 0, 0, 0.25); border-radius: 20px; background-color: transparent; }
    #screen-academic .slide-button:hover { transform: scale(1.04); background-color: rgba(255, 255, 255, 0.1); }
    #screen-academic .footer-text { margin-top: auto; padding-bottom: 10px; }
    
    #screen-custom { background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://ik.imagekit.io/lql1uveoc/%E8%AA%B2%E7%A8%8B%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9/daniel-sessler-IyhdFcaRYqE-unsplash.jpg?updatedAt=1757228147966&tr=w-800,f-auto,q-70'); padding: 80px 20px 20px; justify-content: flex-start; align-items: center;}
    #screen-custom .menu { width:100%; padding: 0 20px; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; flex-grow:1; }
    #screen-custom .glass-title-link { background:rgba(100,20,80,0.25); backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px); border:1px solid rgba(255,255,255,0.18); border-radius:25px; padding:20px 30px; margin-bottom:25px; box-shadow:0 4px 30px rgba(0,0,0,0.2); text-decoration:none; color:white; transition:transform 0.2s ease; display: inline-block; }
    #screen-custom .glass-title-link:hover { transform: scale(1.05); }
    #screen-custom .glass-title-text { font-size:2.5em; font-weight:bold; text-shadow:0 2px 4px rgba(0,0,0,0.5); }
    #screen-custom .button-group { display: flex; flex-direction: column; gap: 15px; width: 100%; }
    #screen-custom .slide-button { display: flex; justify-content: center; align-items: center; font-weight: bold; color: white; text-decoration: none; padding: 15px; font-size: 1.3rem; font-family: 'Orbitron', sans-serif; transition: transform 0.2s ease, background-color 0.2s ease; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 25px rgba(0, 0, 0, 0.25); border-radius: 20px; background-color: transparent; }
    #screen-custom .slide-button:hover { transform: scale(1.04); background-color: rgba(255, 255, 255, 0.1); }
    #screen-custom .footer-text { margin-top: auto; padding-bottom: 10px; }
    .footer-text { font-size: 0.9em; opacity: 0.7; margin-top: auto; padding-bottom: 10px; }
    
    @media (min-width: 1025px) {
        .desktop-view-wrapper { gap: 40px; padding: 40px; }
        #screen-academic .footer-text { margin-top: 25px; }
        @media (min-width: 1025px) and (max-width: 1380px) {
            .desktop-view-wrapper { gap: 0; padding: 40px 20px; }
            .phone:not(:first-child) { margin-left: -60px; }
            .phone:hover { transform: translateY(-10px); z-index: 1; }
        }
    }
    
    #mobile-view-container { display: none; }
    @media (max-width: 1024px) {
        .desktop-view-wrapper { display: none !important; }
        html.mobile-panel-visible, body.mobile-panel-visible { overflow: hidden; }
        body { padding: 0; gap: 0; display: block; background-color: #1a1a1d; }
        #mobile-view-container { display: block; }
        #mobile-menu { display: flex; flex-direction: row; width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; transition: opacity 0.4s ease, visibility 0.4s; }
        #mobile-menu.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .content-panel { display: flex; flex-direction: column; width: 100%; height: 100vh; position: fixed; top: 0; left: 0; background-color: #1a1a1d; transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); visibility: hidden; overflow-y: auto; z-index: 100; -webkit-overflow-scrolling: touch; }
        .content-panel.visible { transform: translateX(0); visibility: visible; }
        .content-panel .phone-screen { min-height: 100%; height: auto; }
        .menu-choice { flex: 1; display: flex; justify-content: center; align-items: flex-start; background-size: cover; background-position: center; color: white; text-decoration: none; position: relative; cursor: pointer; }
        .menu-choice::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.15); z-index: 1; }
        .menu-choice .content-wrapper { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; padding-top: 18vh; }
        .certs-text-container { display: flex; flex-direction: column; gap: 18px; }
        .char-box { font-size: 45px; font-weight: 900; color: #fff; text-shadow: 1px 1px 5px rgba(0,0,0,0.4); padding: 12px 25px; border-radius: 22px; border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .char-box.green { background-color: rgba(46, 204, 113, 0.7); }
        .char-box.red { background-color: rgba(231, 76, 60, 0.7); }
        .char-box.purple { background-color: rgba(155, 89, 182, 0.7); }
        .char-box.orange { background-color: rgba(243, 156, 18, 0.7); }
        .vertical-text-large { display: flex; flex-direction: column; font-size: 50px; font-weight: 900; color: white; text-shadow: 2px 2px 8px rgba(0,0,0,0.7); line-height: 1.3; }
        #mobile-menu-footer { position: absolute; bottom: 32vh; left: 0; right: 0; z-index: 5; color: rgba(255, 255, 255, 0.9); text-align: center; pointer-events: none; font-family: 'æ‰‹æœ­é«”-ç¹é«”', 'Noto Sans TC', sans-serif; }
        #mobile-menu-footer p { margin: 2px 0; font-size: 16px; text-shadow: 1px 1px 3px #000; }
        #mobile-menu-footer .brand-name { font-family: 'Times New Roman', serif; font-style: italic; font-size: 18px; }
        .mobile-status-bar { position: absolute; top: 0; left: 0; right: 0; z-index: 5; color: white; padding: 15px 25px; display: flex; justify-content: space-between; font-size: 15px; font-weight: 600; pointer-events: none; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .dynamic-island-placeholder { position: absolute; top: 12px; left: 50%; transform: translateX(-50%); width: 110px; height: 30px; background: #000; border-radius: 20px; }
        .content-panel .status-bar-container { display: none; }
        .content-panel #screen-certs { padding: 80px 15px 40px; }
        .content-panel #screen-academic, .content-panel #screen-custom { padding: 80px 15px 40px; }
        .content-panel #screen-academic .glass-title-text { font-size: 2.8em; }
        .content-panel #screen-academic .slide-button, .content-panel #screen-custom .slide-button { font-size: 1.2rem; padding: 15px; white-space: nowrap; }
        .content-panel #screen-custom .glass-title-text { font-size: 2.5em; }
        .back-button { display: block; position: fixed; top: 25px; left: 20px; z-index: 105; color: white; background: rgba(0, 0, 0, 0.5); padding: 10px 18px; border-radius: 25px; text-decoration: none; font-weight: bold; border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); }
        .content-panel #screen-certs .certs-footer { margin-top: 25px; padding-bottom: 20px; }
    }
 
    @media (min-width: 768px) and (max-width: 1024px) {
        .menu-choice .content-wrapper { padding-top: 25vh; }
        .char-box { font-size: 60px; padding: 18px 35px; border-radius: 30px; }
        .certs-text-container { gap: 25px; }
        .vertical-text-large { font-size: 70px; }
        #mobile-menu-footer p { font-size: 22px; }
        #mobile-menu-footer .brand-name { font-size: 24px; }
        #mobile-menu .mobile-status-bar .time { display: none; }
        .content-panel #screen-certs, .content-panel #screen-academic, .content-panel #screen-custom { padding-top: 120px; }
        #panel-certs .certs-title { font-size: 5.6em; }
        #panel-certs .slide-button { font-size: 2.6rem; padding: 25px; border-radius: 35px; }
        #panel-certs .slide-button .icon-img { height: 2.6em; width: 2.6em; margin-right: 25px;}
        #panel-certs .subtitle { font-size: 2.8em; }
        #panel-certs .certs-footer { margin-top: 40px; }
        #panel-academic .glass-title-text { font-size: 5.6em; }
        #panel-custom .glass-title-text { font-size: 5em; }
        .content-panel#panel-academic .slide-button, .content-panel#panel-custom .slide-button { font-size: 2.6rem; padding: 25px; border-radius: 35px; }
        #panel-academic .button-group, #panel-custom .button-group { gap: 25px; }
        #panel-academic .footer-text, #panel-custom .footer-text { margin-top: 80px; padding-bottom: 60px; font-size: 1.8em; }
    }

    /* === æ–°å¢åµŒå…¥ï¼šå³å´é ç´„é«”é©—æŒ‰éˆ•èˆ‡å½ˆå‡ºé¢æ¿ Styles === */
    .vertical-banner-link {
      position: fixed; top: 50%; right: 0; transform: translateY(-50%);
      transform-origin: right center; writing-mode: vertical-rl; text-orientation: upright;
      background-color: #00BCD4; color: white; font-size: 14px; font-weight: bold;
      padding: 4px 4px; border-radius: 8px 0 0 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      text-decoration: none; z-index: 1002; transition: all 0.3s ease-in-out; display: block;
    }
    #modal-trigger { display: none; }
    #modal-trigger:target { display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; }
    #modal-trigger .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 10000; cursor: pointer; }
    #modal-trigger .panel {
      position: fixed; top: 0; right: 0; width: 100%; max-width: 500px; height: 100%;
      overflow-y: auto; background: #fff; box-shadow: -4px 0 12px rgba(0,0,0,0.1);
      padding: 24px; z-index: 10001; animation: slideIn 0.3s ease-out; box-sizing: border-box; padding-top: 60px;
    }
    @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    body:has(#modal-trigger:target) { overflow: hidden; }
    @media (min-width: 1024px) {
      .vertical-banner-link { font-size: 20px; padding: 8px 8px; top: 58%; right: 20px; }
      #modal-trigger .panel { max-width: 750px; }
    }

    .steps { max-width: 100%; margin: 20px auto; text-align: left; }
    .step { display: flex; align-items: center; position: relative; padding-bottom: 30px; }
    .number { flex-shrink: 0; width: 40px; height: 40px; border-radius: 8px; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 1.2rem; margin-right: 16px; z-index: 1; }
    .black-bg { background: #000; color: white; }
    .white-bg { background: white; color: black; border: 2px solid #ccc; }
    .step:not(:last-child)::after { content: ""; position: absolute; left: 20px; top: 40px; width: 2px; height: calc(100% - 40px); background: #ccc; z-index: 0; }
    .step-content a { text-decoration: none; color: inherit; display: block; }
    #modal-trigger .panel .title { font-weight: bold; font-size: 1.2rem; margin-bottom: 4px; color: #111; }
    #modal-trigger .panel .description { font-size: 0.95rem; color: #555; }
    #modal-trigger .panel .email { font-size: 0.85rem; margin-top: 2px; color: #333; }
    .cart-box { background: black; color: white; display: inline-block; padding: 8px 16px; border-radius: 8px; font-weight: bold; cursor: pointer; user-select: none; transition: background-color 0.2s; }
    hr.widget-separator { border: 0; height: 1px; background: #ddd; margin: 40px 0; }
    .extra-close-container { text-align: center; margin-top: -20px; padding-bottom: 20px; }
    .extra-close-button {
      display: inline-flex; align-items: center; justify-content: center;
      width: 50px; height: 50px; border: 3px solid red; border-radius: 50%;
      background-color: white; color: red; font-size: 30px; font-weight: 300;
      line-height: 1; text-decoration: none; transition: all 0.2s;
    }
    .extra-close-button:hover { background-color: #ffeeee; transform: scale(1.05); }
    
    #embedding-container { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #fff; padding-top: 20px; }
    .product-widget { max-width: 560px; width: 100%; margin: 0 auto; background-color: white; border-radius: 12px; box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); overflow: hidden; }
    .gallery-slide img { width: 100%; display: block; }
    .product-info { padding: 24px; position: relative; }
    #modal-trigger .panel .product-info h1 { font-size: 24px; color: #111; margin: 0 0 10px 0; line-height: 1.3; }
    #modal-trigger .panel .product-info h2 { font-size: 18px; color: #555; margin: 0; font-weight: 500;}
    .option-selector { margin: 25px 0; }
    #modal-trigger .panel .option-selector label { font-size: 16px; color: #333; font-weight: bold; display: block; margin-bottom: 10px; }
    .option-selector select { font-size: 16px; padding: 10px 14px; border: 1px solid #ccc; border-radius: 6px; width: 100%; box-sizing: border-box; color: #007bff; font-weight: bold; }
    #add-to-cart-btn { width: 100%; background-color: #3b414a; color: white; border: none; padding: 15px 20px; font-size: 18px; font-weight: bold; border-radius: 8px; cursor: pointer; transition: background-color 0.3s ease; }

    .checkout-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
    #modal-trigger .panel .checkout-header h2 { margin: 0; font-size: 24px; color: #111; }
    #back-to-main-btn { background: none; border: 1px solid #ccc; color: #333; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 14px; }
    .checkout-body { display: flex; flex-direction: column; gap: 30px; }
    .cart-summary, .checkout-form-container { background-color: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #e0e0e0; }
    #modal-trigger .panel .cart-summary h3, #modal-trigger .panel .checkout-form-container h3 { margin-top: 0; border-bottom: 1px solid #ddd; padding-bottom: 10px; color: #111;}
    #modal-trigger .panel #checkout-form p { color: #555; }
    .cart-item { display: flex; justify-content: space-between; align-items: flex-start; gap: 15px; padding: 15px 0; border-bottom: 1px solid #eee; }
    .cart-item-name { font-weight: bold; color: #333; }
    .remove-item-btn { background: none; border: none; color: #999; cursor: pointer; font-size: 14px; text-decoration: underline; padding: 0; }
    .cart-item-price { font-weight: bold; white-space: nowrap; color: #333; }
    .cart-total { margin-top: 15px; padding-top: 15px; border-top: 2px solid #333; display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; color: #111; }
    #checkout-form input[type="email"] { width: 100%; padding: 12px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 15px; box-sizing: border-box; color: #000; }
    #checkout-form button { width: 100%; background-color: #3b414a; color: white; border: none; padding: 15px; font-size: 18px; font-weight: bold; border-radius: 6px; cursor: pointer; }
    .line-link { font-weight: bold; color: #00B900; text-align: center; margin-bottom: 15px; display: block; text-decoration: none;}
    .payment-info-section { margin-top: 25px; }
    .payment-method { background-color: #fff; border: 1px solid #e0e0e0; border-radius: 6px; padding: 15px; font-size: 15px; color: #555; }
    @media (min-width: 768px) {
      .checkout-body { flex-direction: row; align-items: flex-start; }
      .cart-summary { flex: 1 1 45%; }
      .checkout-form-container { flex: 1 1 55%; }
    }

    #modal-trigger .panel .ty-header { display: flex; align-items: center; gap: 15px; font-size: 24px; color: #111; margin: 15px 0; }
    .ty-checkmark { font-size: 40px; color: #27ae60; }
    #modal-trigger .panel .ty-message, #modal-trigger .panel #thank-you-view p { color: #555; line-height: 1.6; }
    #modal-trigger .panel .ty-payment-instructions h3 { color: #00B900; }
    #modal-trigger .panel .ty-payment-instructions a { color: #00B900; font-weight: bold; text-decoration: none; }
    #modal-trigger .panel #ty-booking-container h3 { color: #111; font-weight: bold; }
    .ty-order-details { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; }
    #modal-trigger .panel .ty-detail-item { display: flex; justify-content: space-between; padding: 8px 0; font-size: 14px; color: #555; }
    .ty-booking-link { display: block; background-color: #007bff; color: white !important; padding: 12px 20px; border-radius: 8px; text-decoration: none; text-align: center; font-weight: bold; margin-top: 15px; transition: background-color 0.3s ease; }
    .ty-booking-link:hover { background-color: #0056b3; }
    .ty-navigation-links { margin-top: 25px; display: flex; align-items: center; gap: 25px; }
    #continue-shopping-btn, .return-to-main-link { color: #007bff; text-decoration: none; font-weight: bold; }
    .return-to-main-link { color: #dc3545; }
</style>
</head>
<body>

<!-- Header Banner -->
<header class="tony-banner">
    <a href="index.html" class="logo-box">
        <img src="https://ik.imagekit.io/lql1uveoc/IMG_9614.PNG?updatedAt=1750437382543" alt="Logo">
    </a>
    <nav class="nav-links">
        <div class="hamburger-icon" style="color:#FFFFFF; font-size: 24px;">â˜°</div>
        <a href="https://www.youtube.com/@TonyOnlineEnglish" target="_blank" class="pill-btn">
            <img src="https://ik.imagekit.io/lql1uveoc/Banner%20Front%20page/youtube.png" class="social-icon">
            <span>YouTube</span>
        </a>
        <a href="https://www.facebook.com/share/1LwadaizKW/?mibextid=wwXIfr" target="_blank" class="pill-btn">
            <img src="https://ik.imagekit.io/lql1uveoc/Banner%20Front%20page/facebook.png" class="social-icon">
            <span>Facebook</span>
        </a>
        <a href="https://line.me/ti/p/T9YdimtG8_" target="_blank" class="pill-btn">
            <img src="https://ik.imagekit.io/lql1uveoc/Banner%20Front%20page/line.png" class="social-icon">
            <span>LINE</span>
        </a>
    </nav>
</header>

<!-- DESKTOP/TABLET VIEW WRAPPER -->
<div class="desktop-view-wrapper">
    <!-- LEFT PHONE: æª¢å®š -->
    <div class="phone phone-standard shortened">
        <div class="phone-screen" id="screen-certs">
            <div class="status-bar-container"><div class="dynamic-island"></div><div class="status-bar"><div class="time">9:41</div><div class="status-icons"><span>ğŸ“¶</span> <span>Wi-Fi</span> <span>ğŸ”‹</span></div></div></div>
            <div class="certs-title-container"><div class="certs-title">æª¢å®š</div></div>
            <div class="button-group">
                <a class="slide-button green" href="https://tonyonlineenglish.mydurable.com/gept" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/Front%20Page/GEPT_logo.svg.png?updatedAt=1756611596300" alt="Icon">å…¨æ°‘è‹±æª¢GEPT</a>
                <a class="slide-button red" href="https://tonyonlineenglish.mydurable.com/toeic" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/Front%20Page/71-636x434.jpg?updatedAt=1756611513122" alt="Icon">å¤šç›ŠTOEIC</a>
                <a class="slide-button purple" href="https://tonyonlineenglish.mydurable.com/ielts" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/%E6%AA%A2%E5%AE%9A%E8%80%83%E8%A9%A6%E7%B6%B2%E7%AB%99/%E6%88%AA%E5%9C%96%202025-09-05%20%E5%87%8C%E6%99%A81.43.58.png?updatedAt=1757007847078" alt="Icon">é›…æ€IELTS</a>
                <a class="slide-button custom-orange" href="https://tonyonlineenglish.mydurable.com/linguaskill" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/def6e10ece563983eda53901c98c6dfe.webp?updatedAt=1749752404746" alt="Icon">é ˜æ€Linguaskill</a>
                <div class="subtitle">â– è½èªªè®€å¯« â– å„ç´šæ•¸</div>
            </div>
            <footer class="certs-footer"><div class="footer-text">è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</div></footer>
        </div>
    </div>
    <!-- MIDDLE PHONE: å‡å­¸è‹±æ–‡ -->
    <div class="phone phone-max">
        <div class="phone-screen" id="screen-academic">
            <div class="status-bar-container"><div class="dynamic-island"></div><div class="status-bar"><div class="time">9:41</div><div class="status-icons"><span>ğŸ“¶</span> <span>Wi-Fi</span> <span>ğŸ”‹</span></div></div></div>
            <div class="menu">
                <div class="glass-title"><span class="glass-title-text">å‡å­¸è‹±æ–‡</span></div>
                <div class="button-group">
                    <a href="https://tonyonlineenglish.mydurable.com/elementary-school" class="slide-button" target="_blank">åœ‹å°è‹±æ–‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/junior-high-school" class="slide-button" target="_blank">åœ‹ä¸­æœƒè€ƒ</a>
                    <a href="https://tonyonlineenglish.mydurable.com/high-school" class="slide-button" target="_blank">é«˜ä¸­è‹±æ–‡å­¸æ¸¬ï¼‹<span style="color: #FFC300; font-weight: bold;">å¯«ä½œ</span></a>
                    <a href="https://tonyonlineenglish.mydurable.com/vochighschool" class="slide-button" target="_blank">æŠ€é«˜çµ±æ¸¬è‹±æ–‡ï¼‹<span style="color: #FF80AB; font-weight: bold;">ä½œæ–‡</span></a>
                    <a href="https://tonyonlineenglish.mydurable.com/colleges" class="slide-button" target="_blank">å¤§å­¸è‹±æ–‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/graduateschool" class="slide-button" target="_blank">ç ”ç©¶æ‰€ç¢©å£«è‹±æ–‡</a>
                </div>
                <div class="footer-text" style="font-size: 1.1em; opacity: 0.8;">è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</div>
            </div>
        </div>
    </div>
    <!-- RIGHT PHONE: å®¢è£½åŒ–èª²ç¨‹ -->
    <div class="phone phone-max shortened">
        <div class="phone-screen" id="screen-custom">
            <div class="status-bar-container"><div class="dynamic-island"></div><div class="status-bar"><div class="time">9:41</div><div class="status-icons"><span>ğŸ“¶</span> <span>Wi-Fi</span> <span>ğŸ”‹</span></div></div></div>
            <div class="menu">
                <a href="https://tonyonlineenglish.mydurable.com/cuz" class="glass-title-link" target="_blank"><span class="glass-title-text">å®¢è£½åŒ–èª²ç¨‹</span></a>
                <div class="button-group">
                     <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… æˆäººç¾èª</a>
                     <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… å£èªªèƒ½åŠ›æå‡</a>
                     <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… è·å ´è‹±æ–‡</a>
                     <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… å…¬è·è‹±æ–‡</a>
                     <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… è§€å…‰ç¾èª</a>
                     <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… åœ¨å­¸ç”Ÿ</a>
                </div>
                <div class="footer-text" style="font-size: 1.1em; opacity: 0.8;">è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</div>
            </div>
        </div>
    </div>
</div>

<!-- MOBILE-ONLY VIEW -->
<div id="mobile-view-container">
    <div id="mobile-menu">
        <div class="menu-choice" data-target="panel-certs" style="background-image: url('https://ik.imagekit.io/lql1uveoc/%E8%AA%B2%E7%A8%8B%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9/wallace-henry-WHfpUNsHTdQ-unsplash.jpg?updatedAt=1757228192757');">
            <div class="mobile-status-bar"><span class="time">9:41</span><div class="dynamic-island-placeholder"></div></div>
            <div class="content-wrapper"><div class="certs-text-container"><div class="char-box green">è‹±</div><div class="char-box red">æ–‡</div><div class="char-box purple">æª¢</div><div class="char-box orange">å®š</div></div></div>
        </div>
        <div class="menu-choice" data-target="panel-academic" style="background-image: url('https://ik.imagekit.io/lql1uveoc/%E8%AA%B2%E7%A8%8B%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9/benjamin-voros-phIFdC6lA4E-unsplash.jpg?updatedAt=1759344584590&tr=w-800,f-auto,q-70');">
            <div class="mobile-status-bar"><span class="time">9:41</span><div class="dynamic-island-placeholder"></div></div>
            <div class="content-wrapper"><div class="vertical-text-large"><span>å‡</span><span>å­¸</span><span>è‹±</span><span>æ–‡</span></div></div>
        </div>
        <div class="menu-choice" data-target="panel-custom" style="background-image: url('https://ik.imagekit.io/lql1uveoc/%E8%AA%B2%E7%A8%8B%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9/daniel-sessler-IyhdFcaRYqE-unsplash.jpg?updatedAt=1757228147966&tr=w-800,f-auto,q-70');">
            <div class="mobile-status-bar"><span></span><div class="dynamic-island-placeholder"></div></div>
            <div class="content-wrapper"><div class="vertical-text-large"><span>å®¢</span><span>è£½</span><span>åŒ–</span><span>èª²</span><span>ç¨‹</span></div></div>
        </div>
        <div id="mobile-menu-footer">
            <p>è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</p><p><span class="brand-name">Tony</span> ç·šä¸Šç¾èªå®¶æ•™</p>
        </div>
    </div>
    <!-- Content Panels for Mobile -->
    <div class="content-panel" id="panel-certs">
        <a href="#" class="back-button">â† è¿”å›</a>
        <div class="phone-screen" id="screen-certs">
            <div class="certs-title-container"><div class="certs-title">æª¢å®š</div></div>
            <div class="button-group">
                <a class="slide-button green" href="https://tonyonlineenglish.mydurable.com/gept" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/Front%20Page/GEPT_logo.svg.png?updatedAt=1756611596300" alt="Icon">å…¨æ°‘è‹±æª¢GEPT</a>
                <a class="slide-button red" href="https://tonyonlineenglish.mydurable.com/toeic" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/Front%20Page/71-636x434.jpg?updatedAt=1756611513122" alt="Icon">å¤šç›ŠTOEIC</a>
                <a class="slide-button purple" href="https://tonyonlineenglish.mydurable.com/ielts" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/%E6%AA%A2%E5%AE%9A%E8%80%83%E8%A9%A6%E7%B6%B2%E7%AB%99/%E6%88%AA%E5%9C%96%202025-09-05%20%E5%87%8C%E6%99%A81.43.58.png?updatedAt=1757007847078" alt="Icon">é›…æ€IELTS</a>
                <a class="slide-button custom-orange" href="https://tonyonlineenglish.mydurable.com/linguaskill" target="_blank"><img class="icon-img" src="https://ik.imagekit.io/lql1uveoc/def6e10ece563983eda53901c98c6dfe.webp?updatedAt=1749752404746" alt="Icon">é ˜æ€Linguaskill</a>
                <div class="subtitle">â– è½èªªè®€å¯« â– å„ç´šæ•¸</div>
            </div>
            <footer class="certs-footer"><div class="footer-text">è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</div></footer>
        </div>
    </div>
    <div class="content-panel" id="panel-academic">
        <a href="#" class="back-button">â† è¿”å›</a>
        <div class="phone-screen" id="screen-academic">
            <div class="menu">
                <div class="glass-title"><span class="glass-title-text">å‡å­¸è‹±æ–‡</span></div>
                <div class="button-group">
                    <a href="https://tonyonlineenglish.mydurable.com/elementary-school" class="slide-button" target="_blank">åœ‹å°è‹±æ–‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/junior-high-school" class="slide-button" target="_blank">åœ‹ä¸­æœƒè€ƒ</a>
                    <a href="https://tonyonlineenglish.mydurable.com/high-school" class="slide-button" target="_blank">é«˜ä¸­è‹±æ–‡å­¸æ¸¬ï¼‹<span style="color: #FFC300; font-weight: bold;">å¯«ä½œ</span></a>
                    <a href="https://tonyonlineenglish.mydurable.com/vochighschool" class="slide-button" target="_blank">æŠ€é«˜çµ±æ¸¬è‹±æ–‡ï¼‹<span style="color: #FF80AB; font-weight: bold;">ä½œæ–‡</span></a>
                    <a href="https://tonyonlineenglish.mydurable.com/colleges" class="slide-button" target="_blank">å¤§å­¸è‹±æ–‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/graduateschool" class="slide-button" target="_blank">ç ”ç©¶æ‰€ç¢©å£«è‹±æ–‡</a>
                </div>
                <div class="footer-text">è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</div>
            </div>
        </div>
    </div>
    <div class="content-panel" id="panel-custom">
        <a href="#" class="back-button">â† è¿”å›</a>
        <div class="phone-screen" id="screen-custom">
            <div class="menu">
                <a href="https://tonyonlineenglish.mydurable.com/cuz" class="glass-title-link" target="_blank"><span class="glass-title-text">å®¢è£½åŒ–èª²ç¨‹</span></a>
                <div class="button-group">
                    <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… æˆäººç¾èª</a>
                    <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… å£èªªèƒ½åŠ›æå‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… è·å ´è‹±æ–‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… å…¬è·è‹±æ–‡</a>
                    <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… è§€å…‰ç¾èª</a>
                    <a href="https://tonyonlineenglish.mydurable.com/cuz" class="slide-button" target="_blank">â˜… åœ¨å­¸ç”Ÿ</a>
                </div>
                <div class="footer-text">è©³æƒ…è«‹é»æ“Šä¸Šæ–¹å„é€£çµ</div>
            </div>
        </div>
    </div>
</div>

<!-- === æ–°å¢ï¼šå³å´é ç´„é«”é©—èª²ç¨‹æŒ‰éˆ•èˆ‡å½ˆå‡ºé¢æ¿ === -->
<a id="reservationBtn" class="vertical-banner-link" href="#modal-trigger">ğŸ“… é»é¸é ç´„é«”é©—èª²ç¨‹</a>

<div id="modal-trigger">
    <a href="#" class="overlay"></a>
    <div class="panel">
      <div id="main-content-view">
        <div class="steps">
          <div class="step"><div class="number black-bg">1</div><div class="step-content"><a href="https://line.me/ti/p/T9YdimtG8_" target="_blank"><div class="title">åŠ å…¥Line: Myavalon</div><div class="description">é»æ“Šå¾Œæœƒè‡ªå‹•é–‹å•ŸLineä¸¦åŠ å…¥å¥½å‹</div></a></div></div>
          <div class="step"><div class="number white-bg">2</div><div class="step-content"><div class="title">æˆ–æ˜¯Email</div><div class="email">TonyOnlineEnglish@gmail.com</div></div></div>
          <div class="step"><div class="number white-bg">3</div><div class="step-content"><a href="https://docs.google.com/forms/d/e/1FAIpQLSfk2FL_YLvCUVIJ4l03NyfoofHPxzWXP-MbODb9V5dEHWpHRw/viewform?usp=header" target="_blank"><div class="title">å­¸ç¿’éœ€æ±‚å•å·ï¼ˆ3 åˆ†é˜ï¼‰</div><div class="description">é»æ“Šé€²å…¥ä¸¦å®Œæˆç·šä¸Šå•å·</div></a></div></div>
          <div style="display: flex; align-items: center; gap: 20px;">
              <div class="step" style="flex-grow: 1; padding-bottom: 0;">
                <div class="number white-bg">4</div>
                <div class="step-content"><a href="https://tonyonlineenglish.mydurable.com/experience" target="_blank"><div class="cart-box"> ğŸ”— åŠ å…¥è³¼ç‰©è»Š</div></a></div>
              </div>
              <div class="extra-close-container" style="flex-shrink: 0; padding-bottom: 0; margin-top: 0;">
                <a href="#" class="extra-close-button">Ã—</a>
              </div>
          </div>
        </div>
        <hr class="widget-separator">
        <div id="embedding-container">
          <div class="product-widget">
            <div class="image-gallery"><div class="gallery-slide"><img id="product-image" src="" alt="ç·šä¸Šé«”é©—èª²ç¨‹"></div></div>
            <div class="product-info">
              <h1>Tonyç·šä¸Šç¾èªå®¶æ•™</h1>
              <h2>ç·šä¸Šé«”é©—èª²ç¨‹ 25/50åˆ†é˜</h2>
              <div class="option-selector">
                <label for="course-options">é¸æ“‡é«”é©—èª²ç¨‹æ–¹æ¡ˆ</label>
                <select id="course-options"></select>
              </div>
              <button id="add-to-cart-btn"></button>
            </div>
          </div>
        </div>
      </div>

      <div id="checkout-view" style="display: none;">
        <div class="checkout-header">
          <h2>æ‚¨çš„è³¼ç‰©è»Š</h2>
          <button id="back-to-main-btn">â† è¿”å›</button>
        </div>
        <div class="checkout-body">
          <div class="cart-summary">
            <h3>è¨‚å–®æ‘˜è¦</h3>
            <div id="cart-items-container"></div>
            <div class="cart-total"><span>ç¸½è¨ˆ</span><span id="total-price">NT$0</span></div>
          </div>
          <div class="checkout-form-container">
            <h3>çµå¸³</h3>
            <form id="checkout-form">
              <p>è«‹è¼¸å…¥æ‚¨çš„é›»å­ä¿¡ç®±ã€‚</p>
              <input type="email" id="email" name="email" required>
              <a class="line-link" href="https://line.me/ti/p/T9YdimtG8_" target="_blank">è«‹åŠ å…¥Line: Myavalon</a>
              <button type="submit">ç¢ºèªè¨‚å–®</button>
              <div class="payment-info-section">
                <h3>ä»˜æ¬¾è³‡è¨Š</h3>
                <div class="payment-method">
                    <span>éŠ€è¡Œè½‰å¸³æˆ–æ˜¯Line Pay ä»˜æ¬¾ (iPass Money)</span>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div id="thank-you-view" style="display: none;">
        <h2 class="ty-header"><span class="ty-checkmark">âœ“</span>æ„Ÿè¬æ‚¨çš„è¨‚è³¼ï¼</h2>
        <p class="ty-message">æ‚¨çš„è¨‚å–®å·²æˆåŠŸå»ºç«‹ã€‚ç¢ºèªä¿¡å·²å¯„é€è‡³æ‚¨çš„é›»å­ä¿¡ç®±ï¼Œè«‹æª¢æŸ¥æ‚¨çš„æ”¶ä»¶åŒ£ã€‚</p>
        <div class="ty-order-details">
          <div class="ty-detail-item"><span>è¨‚å–®ç·¨è™Ÿ</span><span id="ty-order-id"></span></div>
          <div class="ty-detail-item"><span>è¨‚å–®æ™‚é–“</span><span id="ty-order-timestamp"></span></div>
          <div class="ty-detail-item"><span>é›»å­ä¿¡ç®±</span><span id="ty-customer-email"></span></div>
        </div>
        <div id="ty-booking-container" style="display: none;">
          <h3>ä¸‹ä¸€æ­¥ï¼šé ç´„èª²ç¨‹</h3>
          <p>è«‹é»æ“Šä¸‹æ–¹å°ˆå±¬é€£çµï¼Œé ç´„æ‚¨çš„ä¸Šèª²æ™‚é–“ï¼š</p>
          <div id="ty-booking-links-list"></div>
        </div>
        <div class="ty-payment-instructions" style="margin-top: 20px;">
          <h3>å¦‚ä½•ä»˜æ¬¾</h3>
          <p><a href="https://line.me/ti/p/T9YdimtG8_" target="_blank">è«‹é»é¸åŠ å…¥ Line: Myavalon</a></p>
        </div>
        <div class="ty-navigation-links">
          <a href="#" id="continue-shopping-btn">ç¹¼çºŒè³¼ç‰©</a>
          <a href="#" class="return-to-main-link">è¿”å›ä¸»é </a>
        </div>
      </div>
    </div>
</div>

<script>
// --- åŸæœ‰é‚è¼¯ï¼šé é¢æ»¾å‹•èˆ‡æ‰‹æ©Ÿç‰ˆé¢æ¿æ§åˆ¶ ---
(function() {
    if (window.innerWidth > 1024) {
        setTimeout(() => {
            window.scrollTo({ top: 180, behavior: 'smooth' });
        }, 500); 
        return; 
    }

    const docRoot = document.documentElement;
    const mobileMenu = document.getElementById('mobile-menu');
    const contentPanels = document.querySelectorAll('.content-panel');
    const menuChoices = document.querySelectorAll('#mobile-menu .menu-choice');

    const showMainMenu = () => {
        docRoot.classList.remove('mobile-panel-visible');
        mobileMenu.classList.remove('hidden');
        contentPanels.forEach(p => p.classList.remove('visible'));
    };

    const showPanel = (panelId) => {
        const targetPanel = document.getElementById(panelId);
        if (targetPanel) {
            docRoot.classList.add('mobile-panel-visible');
            mobileMenu.classList.add('hidden');
            contentPanels.forEach(p => p.classList.remove('visible'));
            targetPanel.classList.add('visible');
            targetPanel.scrollTop = 0;
        } else {
            showMainMenu();
        }
    };

    menuChoices.forEach(choice => {
        choice.addEventListener('click', (e) => {
            e.preventDefault();
            const panelId = choice.dataset.target;
            history.pushState({ panel: panelId }, '', `#${panelId}`);
            showPanel(panelId);
        });
    });

    document.querySelectorAll('.back-button').forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            history.pushState({ panel: null }, '', window.location.pathname);
            showMainMenu();
        });
    });

    window.addEventListener('popstate', (event) => {
        if (event.state && event.state.panel) {
            showPanel(event.state.panel);
        } else {
            showMainMenu();
        }
    });

    window.addEventListener('load', () => {
        const initialHash = window.location.hash.slice(1);
        const validPanels = ['panel-certs', 'panel-academic', 'panel-custom'];
        if (initialHash && validPanels.includes(initialHash)) {
            history.replaceState({ panel: initialHash }, '', `#${initialHash}`);
            showPanel(initialHash);
        } else {
            history.replaceState({ panel: null }, '', window.location.pathname);
            showMainMenu();
            setTimeout(() => {
                if (window.innerWidth <= 1024) {
                    window.scrollTo({ top: 100, behavior: 'smooth' });
                }
            }, 200);
        }
    });
})();

// --- æ–°å¢é‚è¼¯ï¼šè³¼ç‰©è»Šé¢æ¿åŠŸèƒ½ ---
document.addEventListener('DOMContentLoaded', () => {
    // é€²å…¥ç¶²é è‹¥å¸¶æœ‰ #modal-trigger å°‡å…¶æ¸…é™¤ï¼ˆé˜²é‡æ–°æ•´ç†ä¾ç„¶é–‹è‘—ï¼‰
    if (window.location.hash === '#modal-trigger') {
        history.replaceState(null, document.title, window.location.pathname + window.location.search);
    }
    const products =[
        { id: 'trial-25', name: 'é«”é©—èª²ç¨‹25åˆ†é˜', price: 350, bookingLink: 'https://tonyonlineenglish.setmore.com/services/e2482488-9727-40ce-87f4-3a12700d8d74?step=time-slot&products=e2482488-9727-40ce-87f4-3a12700d8d74&type=service&staff=f0ab8ee6-e0c0-4c4e-8f89-d68a4cdaf046&staffSelected=false' },
        { id: 'trial-50', name: 'é«”é©—èª²ç¨‹50åˆ†é˜', price: 550, bookingLink: 'https://tonyonlineenglish.setmore.com/services/3de1afad-6f57-4b4f-8ba8-0185f3e039d5?step=time-slot&products=3de1afad-6f57-4b4f-8ba8-0185f3e039d5&type=service&staff=f0ab8ee6-e0c0-4c4e-8f89-d68a4cdaf046&staffSelected=false' }
    ];
    const logoUrl = "https://ik.imagekit.io/lql1uveoc/Abstract%20Special%20Offer%20Announcement%20Free%20Facebook%20Post.png?updatedAt=1754673537869";
    let cart = {};
    const panel = document.querySelector('#modal-trigger .panel');
    const mainView = document.getElementById('main-content-view');
    const checkoutView = document.getElementById('checkout-view');
    const thankYouView = document.getElementById('thank-you-view');
    const courseOptionsSelect = document.getElementById('course-options');
    const addToCartBtn = document.getElementById('add-to-cart-btn');
    const backToMainBtn = document.getElementById('back-to-main-btn');
    const checkoutForm = document.getElementById('checkout-form');
    const continueShoppingBtn = document.getElementById("continue-shopping-btn");

    function initializeWidget() {
        document.getElementById('product-image').src = logoUrl;
        products.forEach(p => courseOptionsSelect.innerHTML += `<option value="${p.id}">${p.name} NT$ ${p.price.toLocaleString()}</option>`);
        updateButton();
    }
    function updateButton() {
        const selectedProduct = products.find(p => p.id === courseOptionsSelect.value);
        if (selectedProduct) addToCartBtn.textContent = `NT$ ${selectedProduct.price.toLocaleString()} | åŠ å…¥è³¼ç‰©è»Š`;
    }
    function handleAddToCart() {
        const productToAdd = products.find(p => p.id === courseOptionsSelect.value);
        if (productToAdd) cart[productToAdd.id] = { ...productToAdd };
        updateCheckoutView();
        mainView.style.display = 'none';
        checkoutView.style.display = 'block';
        panel.scrollTo(0, 0);
    }
    function updateCheckoutView() {
        const cartItemsContainer = document.getElementById('cart-items-container');
        const totalPriceSpan = document.getElementById('total-price');
        let totalItems = Object.keys(cart).length, totalPrice = 0;
        cartItemsContainer.innerHTML = "";
        if (totalItems > 0) {
            Object.keys(cart).forEach(id => {
                const item = cart[id];
                totalPrice += item.price;
                cartItemsContainer.innerHTML += `<div class="cart-item" data-id="${id}"><div class="cart-item-info"><div class="cart-item-name">${item.name}</div><button class="remove-item-btn">ç§»é™¤</button></div><div class="cart-item-price">NT$ ${item.price.toLocaleString()}</div></div>`;
            });
        } else {
            cartItemsContainer.innerHTML = '<p>æ‚¨çš„è³¼ç‰©è»Šæ˜¯ç©ºçš„ã€‚</p>';
        }
        totalPriceSpan.innerText = `NT$ ${totalPrice.toLocaleString()}`;
    }
    function handleRemoveItem(e) {
        if (e.target.classList.contains('remove-item-btn')) {
            const productId = e.target.closest('.cart-item').dataset.id;
            delete cart[productId];
            updateCheckoutView();
            if (Object.keys(cart).length === 0) showMainView();
        }
    }
    function showMainView() {
        checkoutView.style.display = 'none';
        thankYouView.style.display = 'none';
        mainView.style.display = 'block';
        panel.scrollTo(0, 0);
    }
    function handleCheckout(e) {
      e.preventDefault();
      const email = document.getElementById("email").value;
      if (Object.keys(cart).length === 0) { alert("æ‚¨çš„è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼"); return; }
      const orderId = '#'+Math.random().toString(36).substr(2, 5).toUpperCase();
      const timestamp = new Date().toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});
      const checkoutButton = checkoutForm.querySelector("button");
      let totalPrice = 0;
      const itemsForThankYouPage = Object.values(cart);
      const bookingLinks = itemsForThankYouPage.map(item => ({ name: item.name, link: item.bookingLink }));
      itemsForThankYouPage.forEach(item => totalPrice += item.price);
      checkoutButton.disabled = true; checkoutButton.innerText = "è™•ç†ä¸­...";
      populateThankYouPage({ email, totalPrice, orderId, timestamp, bookingLinks });
      checkoutView.style.display = 'none';
      thankYouView.style.display = 'block';
      panel.scrollTo(0, 0);
      const productNamesString = itemsForThankYouPage.map(i => i.name).join(', ');
      fetch("https://script.google.com/macros/s/AKfycbyU13Wivs341DMPupk9EKrL9u908zrHNOVqZUXri-hGezkk6qj_7loQGIf0GCfmvj_f/exec", { method: "POST", body: new URLSearchParams({ orderId, email, productName: productNamesString, totalPrice, status: "æœªä»˜æ¬¾", imageUrls: logoUrl }) })
      .catch(e => console.error("Fetch error:", e))
      .finally(() => { checkoutButton.disabled = false; checkoutButton.innerText = "ç¢ºèªè¨‚å–®"; });
    }
    function populateThankYouPage(data) {
        document.getElementById('ty-customer-email').innerText = data.email;
        document.getElementById('ty-order-id').innerText = data.orderId;
        document.getElementById('ty-order-timestamp').innerText = data.timestamp;
        const bookingLinksList = document.getElementById('ty-booking-links-list');
        const bookingContainer = document.getElementById('ty-booking-container');
        bookingLinksList.innerHTML = data.bookingLinks.map(item => `<a href="${item.link}" target="_blank" class="ty-booking-link">é»æ­¤é ç´„ï¼š${item.name}</a>`).join('');
        bookingContainer.style.display = data.bookingLinks.length > 0 ? 'block' : 'none';
    }
    initializeWidget();
    courseOptionsSelect.addEventListener('change', updateButton);
    addToCartBtn.addEventListener("click", handleAddToCart);
    backToMainBtn.addEventListener("click", showMainView);
    document.getElementById('cart-items-container').addEventListener('click', handleRemoveItem);
    checkoutForm.addEventListener("submit", handleCheckout);
    continueShoppingBtn.addEventListener('click', (e) => { 
        e.preventDefault(); 
        cart = {};
        showMainView(); 
    });
});
</script>
</body>
</html>
